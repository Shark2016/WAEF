#pragma once
#include "AssisToolMdl.h"
#include "tinyxml\tinyxml.h"
#include <string>
#include <vector>
using namespace std;


class CExploitModule
{
public:
	CExploitModule(void);
	~CExploitModule(void);

public:
	void InitExploitModule(CEdit* interactiveBox);
	bool LoadModule(CString path);
	bool StartExploit();
	bool SetConfig(string config);
	void UpdateConfig(CString& data);
	CString GetModuleName();
	CString GetModuleCatgory();
	CString GetModuleDesc();
	CString GetModuleConfig();

private:
	size_t static write_callback( void *ptr, size_t size, size_t nmemb, string &userp);
	string utf8togb(string source);


	CString				_moduleName;
	CString				_moduleDesc;
	CString				_moduleConf;
	CString				_moduleCatgory;
	
	CString				_path;

	TiXmlDocument		_tiXmlDoc;
	CAssisToolMdl		_toolmdl;

	CEdit*				_interactiveBox;

	vector<pair<string, string> >	_configVector;
};

